<div class="jokes-container">
  <div class="jokes-layout">
    <!-- Left Sidebar -->
    <aside class="jokes-sidebar">
      <h3 class="sidebar-title">Filters</h3>

      <div class="filter-section">
        <h4 class="filter-title">
          <i class="fa fa-folder"></i> Categories
        </h4>
        <ul class="filter-list">
          <li>
            <a routerLink="/jokes/list" [queryParams]="{}"
               [class.active]="!selectedCategory"
               class="filter-link">
              <i class="fa fa-list"></i> All Jokes
            </a>
          </li>
          <li>
            <a routerLink="/jokes/list" [queryParams]="{category: 'programming'}"
               [class.active]="selectedCategory === 'programming'"
               class="filter-link">
              <i class="fa fa-code"></i> Programming
            </a>
          </li>
          <li>
            <a routerLink="/jokes/list" [queryParams]="{category: 'general'}"
               [class.active]="selectedCategory === 'general'"
               class="filter-link">
              <i class="fa fa-comment"></i> General
            </a>
          </li>
          <li>
            <a routerLink="/jokes/list" [queryParams]="{category: 'dad'}"
               [class.active]="selectedCategory === 'dad'"
               class="filter-link">
              <i class="fa fa-user"></i> Dad Jokes
            </a>
          </li>
          <li>
            <a routerLink="/jokes/list" [queryParams]="{category: 'knock-knock'}"
               [class.active]="selectedCategory === 'knock-knock'"
               class="filter-link">
              <i class="fa fa-hand-paper-o"></i> Knock-Knock
            </a>
          </li>
        </ul>
      </div>

      <div class="filter-section" *ngIf="userStore.isLoggedIn()">
        <h4 class="filter-title">
          <i class="fa fa-star"></i> My Jokes
        </h4>
        <ul class="filter-list">
          <li>
            <a (click)="showFavorites()"
               [class.active]="filterType === 'favorites'"
               class="filter-link"
               style="cursor: pointer;">
              <i class="fa fa-star"></i> Favorites
            </a>
          </li>
        </ul>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="jokes-content">
      <div class="jokes-header" *ngIf="userStore.isLoggedIn()">
        <a routerLink="/jokes/create" class="btn btn-primary">
          <i class="bi bi-plus-circle"></i> Add Joke
        </a>
      </div>

      <div *ngIf="(jokes$ | async) as jokes; else loading">
        <div *ngIf="jokes.length > 0; else noJokes" class="jokes-grid">
          <app-joke-item
            *ngFor="let joke of jokes"
            [joke]="joke"
            (favoriteToggled)="onFavoriteToggled($event)">
          </app-joke-item>
        </div>

        <ng-template #noJokes>
          <div class="empty-state">
            <i class="bi bi-info-circle empty-icon"></i>
            <h4 class="empty-title">No Jokes Found</h4>
            <p class="empty-text">No jokes available yet. Be the first to add one!</p>
            <a routerLink="/jokes/create" class="btn btn-primary" *ngIf="userStore.isLoggedIn()">
              <i class="bi bi-plus-circle"></i> Add Your First Joke
            </a>
          </div>
        </ng-template>
      </div>

      <ng-template #loading>
        <div class="loading-state">
          <div class="spinner-border" style="color: var(--primary-blue);" role="status">
            <span class="visually-hidden">Loading...</span>
          </div>
          <p class="loading-text">Loading jokes...</p>
        </div>
      </ng-template>
    </main>
  </div>
</div>
